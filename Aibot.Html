<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Game Development Assistant</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background-color: #0f172a;
        color: #e2e8f0;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        height: 100vh;
      }

      .header {
        background-color: #1e293b;
        padding: 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        z-index: 10;
      }

      .header h1 {
        color: #38bdf8;
        font-size: 1.5rem;
      }

      .nav-buttons {
        display: flex;
        gap: 0.5rem;
      }

      .nav-button {
        background-color: #334155;
        color: #e2e8f0;
        border: none;
        padding: 0.5rem 1rem;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.2s;
      }

      .nav-button:hover {
        background-color: #475569;
      }

      .nav-button.active {
        background-color: #38bdf8;
        color: #0f172a;
      }

      .main-container {
        display: flex;
        flex: 1;
        overflow: hidden;
      }

      .chat-container {
        display: flex;
        flex-direction: column;
        width: 350px;
        background-color: #1e293b;
        border-right: 1px solid #334155;
        transition: transform 0.3s ease;
      }

      .chat-header {
        padding: 1rem;
        background-color: #2a3a4f;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .chat-header .assistant-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: #38bdf8;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        color: #0f172a;
      }

      .chat-header .assistant-info h3 {
        font-size: 1rem;
        margin-bottom: 0.25rem;
      }

      .chat-header .assistant-info p {
        font-size: 0.75rem;
        color: #94a3b8;
      }

      .chat-messages {
        flex: 1;
        padding: 1rem;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .message {
        max-width: 80%;
        padding: 0.75rem;
        border-radius: 12px;
        animation: fadeIn 0.3s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .message.user {
        align-self: flex-end;
        background-color: #38bdf8;
        color: #0f172a;
        border-bottom-right-radius: 0;
      }

      .message.assistant {
        align-self: flex-start;
        background-color: #334155;
        color: #e2e8f0;
        border-bottom-left-radius: 0;
      }

      .message.system {
        align-self: center;
        background-color: #475569;
        color: #e2e8f0;
        font-size: 0.8rem;
        padding: 0.5rem 0.75rem;
        border-radius: 16px;
        opacity: 0.8;
      }

      .message pre {
        background-color: #1e293b;
        padding: 0.5rem;
        border-radius: 4px;
        overflow-x: auto;
        margin: 0.5rem 0;
        font-family: monospace;
        color: #e2e8f0;
      }

      .message code {
        background-color: #1e293b;
        padding: 0.1rem 0.3rem;
        border-radius: 3px;
        font-family: monospace;
      }

      .chat-input {
        padding: 1rem;
        background-color: #2a3a4f;
        display: flex;
        gap: 0.5rem;
        align-items: center;
      }

      .chat-input input {
        flex: 1;
        padding: 0.75rem;
        border-radius: 4px;
        border: 1px solid #475569;
        background-color: #1e293b;
        color: #e2e8f0;
        outline: none;
      }

      .chat-input input:focus {
        border-color: #38bdf8;
      }

      .chat-input button {
        background-color: #38bdf8;
        color: #0f172a;
        border: none;
        padding: 0.75rem;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.2s;
      }

      .chat-input button:hover {
        background-color: #0ea5e9;
      }

      .chat-input button:disabled {
        background-color: #475569;
        cursor: not-allowed;
      }

      .content-area {
        flex: 1;
        overflow-y: auto;
        padding: 1rem;
      }

      .topic-container {
        background-color: #1e293b;
        border-radius: 8px;
        margin-bottom: 1.5rem;
        overflow: hidden;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s;
      }

      .topic-container:hover {
        transform: translateY(-3px);
      }

      .topic-header {
        background-color: #2a3a4f;
        padding: 1rem;
        cursor: pointer;
      }

      .topic-header h2 {
        font-size: 1.2rem;
        color: #38bdf8;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .topic-content {
        padding: 0;
        max-height: 0;
        overflow: hidden;
        transition: all 0.3s ease;
      }

      .topic-content.active {
        padding: 1rem;
        max-height: 1000px;
      }

      .topic-content p,
      .topic-content ul {
        margin-bottom: 1rem;
        line-height: 1.6;
      }

      .topic-content ul {
        padding-left: 1.5rem;
      }

      .buttons-container {
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
        margin: 1rem 0;
      }

      .quick-button {
        background-color: #334155;
        color: #e2e8f0;
        border: none;
        padding: 0.5rem 1rem;
        border-radius: 16px;
        cursor: pointer;
        transition: background-color 0.2s;
        font-size: 0.9rem;
      }

      .quick-button:hover {
        background-color: #38bdf8;
        color: #0f172a;
      }

      .toggle-chat {
        position: fixed;
        bottom: 1rem;
        right: 1rem;
        background-color: #38bdf8;
        color: #0f172a;
        border: none;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        cursor: pointer;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        z-index: 100;
        transition: background-color 0.2s;
      }

      .toggle-chat:hover {
        background-color: #0ea5e9;
      }

      /* Responsive design */
      @media (max-width: 768px) {
        .main-container {
          flex-direction: column;
        }

        .chat-container {
          width: 100%;
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          transform: translateY(100%);
          z-index: 50;
          max-height: 70vh;
        }

        .chat-container.active {
          transform: translateY(0);
        }

        .content-area {
          margin-bottom: 60px;
        }
      }

      /* Syntax highlighting for code */
      .code-keyword {
        color: #ff79c6;
      }
      .code-string {
        color: #f1fa8c;
      }
      .code-number {
        color: #bd93f9;
      }
      .code-comment {
        color: #6272a4;
      }
      .code-function {
        color: #50fa7b;
      }

      /* Loading dots animation */
      .loading-dots {
        display: inline-block;
        width: 20px;
      }

      .loading-dots::after {
        content: "...";
        animation: loading 1.5s infinite;
      }

      @keyframes loading {
        0% {
          content: ".";
        }
        33% {
          content: "..";
        }
        66% {
          content: "...";
        }
      }

      /* Code editor styling */
      .code-editor {
        background-color: #1e1e1e;
        border-radius: 8px;
        overflow: hidden;
        margin: 1.5rem 0;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .code-editor-header {
        background-color: #2d2d2d;
        padding: 0.5rem 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .code-editor-header .tabs {
        display: flex;
        gap: 0.25rem;
      }

      .code-editor-header .tab {
        padding: 0.25rem 0.75rem;
        background-color: #3c3c3c;
        border-radius: 4px 4px 0 0;
        font-size: 0.8rem;
      }

      .code-editor-header .tab.active {
        background-color: #1e1e1e;
      }

      .code-editor-content {
        padding: 1rem;
        font-family: monospace;
        white-space: pre;
        overflow-x: auto;
        line-height: 1.5;
      }

      /* Custom scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }

      ::-webkit-scrollbar-track {
        background: #1e293b;
      }

      ::-webkit-scrollbar-thumb {
        background: #475569;
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: #64748b;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>Game Development Assistant</h1>
      <div class="nav-buttons">
        <button class="nav-button active" id="homeButton">Home</button>
        <button class="nav-button" id="designerButton">
          Background Designer
        </button>
        <button class="nav-button" id="tutorialsButton">Tutorials</button>
        <button class="nav-button" id="resourcesButton">Resources</button>
      </div>
    </div>

    <div class="main-container">
      <div class="content-area">
        <h2 style="margin-bottom: 1rem; color: #38bdf8">
          Game Development Hub
        </h2>
        <p style="margin-bottom: 1.5rem">
          Welcome to our Game Development Hub! This platform provides tools,
          resources, and AI assistance to help you create your own games. Use
          our Background Designer to create beautiful game environments, explore
          tutorials, and chat with our AI assistant for help.
        </p>

        <div class="buttons-container">
          <button
            class="quick-button"
            onclick="askQuestion('How do I make a 2D game?')"
          >
            How do I make a 2D game?
          </button>
          <button
            class="quick-button"
            onclick="askQuestion('Recommend a game engine for beginners')"
          >
            Game engines for beginners
          </button>
          <button
            class="quick-button"
            onclick="askQuestion('How to use the Background Designer?')"
          >
            Use the Background Designer
          </button>
          <button
            class="quick-button"
            onclick="askQuestion('What are sprites in game development?')"
          >
            What are sprites?
          </button>
        </div>

        <div class="topic-container">
          <div class="topic-header" onclick="toggleTopic(this.parentElement)">
            <h2>Getting Started with Game Development <span>+</span></h2>
          </div>
          <div class="topic-content">
            <p>
              Game development is the process of creating a video game. It
              involves various disciplines including programming, art design,
              storytelling, and sound design. Here's how to get started:
            </p>
            <ul>
              <li>
                <strong>Choose a game engine</strong> - Popular options include
                Unity, Unreal Engine, Godot, and GameMaker Studio.
              </li>
              <li>
                <strong>Learn programming basics</strong> - Different engines
                use different languages (C#, C++, GDScript, etc.)
              </li>
              <li>
                <strong>Start small</strong> - Begin with simple projects like
                Pong or a platformer
              </li>
              <li>
                <strong>Build art assets</strong> - Use our Background Designer
                to create game backgrounds
              </li>
              <li>
                <strong>Iterate and test</strong> - Game development is an
                iterative process
              </li>
            </ul>
            <button
              class="quick-button"
              onclick="askQuestion('Which programming language should I learn for game development?')"
            >
              Ask about programming languages
            </button>
          </div>
        </div>

        <div class="topic-container">
          <div class="topic-header" onclick="toggleTopic(this.parentElement)">
            <h2>About Our Background Designer Tool <span>+</span></h2>
          </div>
          <div class="topic-content">
            <p>
              Our Background Designer is a powerful tool that allows you to
              create professional game backgrounds without advanced art skills.
              Key features include:
            </p>
            <ul>
              <li>
                <strong>Layer Management</strong> - Create and organize multiple
                layers
              </li>
              <li>
                <strong>Gradient Backgrounds</strong> - Create beautiful
                gradient effects
              </li>
              <li>
                <strong>Particle Effects</strong> - Add dynamic particles like
                snow, rain, and fire
              </li>
              <li>
                <strong>Text and Shapes</strong> - Add customizable text and
                geometric shapes
              </li>
              <li>
                <strong>Filters & Effects</strong> - Apply visual adjustments
                like blur and color correction
              </li>
              <li>
                <strong>Animation</strong> - Create simple animations for your
                background elements
              </li>
              <li>
                <strong>Preset Templates</strong> - Use pre-designed templates
                for quick results
              </li>
            </ul>
            <button class="quick-button" onclick="redirectToDesigner()">
              Open Background Designer
            </button>
            <button
              class="quick-button"
              onclick="askQuestion('How do I add a particle effect in the Background Designer?')"
            >
              Ask how to use particles
            </button>
          </div>
        </div>

        <div class="topic-container">
          <div class="topic-header" onclick="toggleTopic(this.parentElement)">
            <h2>Popular Game Engines <span>+</span></h2>
          </div>
          <div class="topic-content">
            <p>
              There are many game engines available, each with their own
              strengths and learning curves:
            </p>

            <h3 style="margin: 1rem 0 0.5rem; color: #38bdf8">Unity</h3>
            <p>
              A versatile engine that can be used for 2D and 3D games. It uses
              C# for scripting and has a large community and asset store.
            </p>

            <h3 style="margin: 1rem 0 0.5rem; color: #38bdf8">Unreal Engine</h3>
            <p>
              Known for its high-quality graphics capabilities. It uses C++ or
              Blueprints (visual scripting) and is free until your game makes
              significant revenue.
            </p>

            <h3 style="margin: 1rem 0 0.5rem; color: #38bdf8">Godot</h3>
            <p>
              A free and open-source engine that's gaining popularity. It uses
              its own scripting language (GDScript) and has a node-based
              architecture.
            </p>

            <h3 style="margin: 1rem 0 0.5rem; color: #38bdf8">
              GameMaker Studio
            </h3>
            <p>
              Designed primarily for 2D games with a simpler learning curve.
              Great for beginners but requires a license purchase.
            </p>

            <button
              class="quick-button"
              onclick="askQuestion('What are the differences between Unity and Unreal Engine?')"
            >
              Compare Unity & Unreal
            </button>
          </div>
        </div>

        <div class="code-editor">
          <div class="code-editor-header">
            <div class="tabs">
              <div class="tab active">game.js</div>
            </div>
            <div style="font-size: 0.8rem">JavaScript - Basic Game Loop</div>
          </div>
          <div class="code-editor-content">
            <span class="code-comment"
              >// Basic game loop example in JavaScript</span
            >
            <span class="code-keyword">const</span>
            <span class="code-function">canvas</span> =
            document.getElementById(<span class="code-string">'gameCanvas'</span
            >); <span class="code-keyword">const</span>
            <span class="code-function">ctx</span> = canvas.getContext(<span
              class="code-string"
              >'2d'</span
            >);

            <span class="code-comment">// Game state</span>
            <span class="code-keyword">const</span>
            <span class="code-function">player</span> = { x:
            <span class="code-number">100</span>, y:
            <span class="code-number">100</span>, width:
            <span class="code-number">50</span>, height:
            <span class="code-number">50</span>, speed:
            <span class="code-number">5</span>, color:
            <span class="code-string">'#38bdf8'</span>
            };

            <span class="code-comment">// Input handling</span>
            <span class="code-keyword">const</span>
            <span class="code-function">keys</span> = {};
            window.addEventListener(<span class="code-string">'keydown'</span>,
            e => keys[e.key] = <span class="code-keyword">true</span>);
            window.addEventListener(<span class="code-string">'keyup'</span>, e
            => keys[e.key] = <span class="code-keyword">false</span>);

            <span class="code-comment">// Game loop</span>
            <span class="code-function">function</span>
            <span class="code-function">gameLoop</span>() {
            <span class="code-comment">// Update</span>
            <span class="code-keyword">if</span> (keys[<span class="code-string"
              >'ArrowRight'</span
            >]) player.x += player.speed;
            <span class="code-keyword">if</span> (keys[<span class="code-string"
              >'ArrowLeft'</span
            >]) player.x -= player.speed;
            <span class="code-keyword">if</span> (keys[<span class="code-string"
              >'ArrowUp'</span
            >]) player.y -= player.speed;
            <span class="code-keyword">if</span> (keys[<span class="code-string"
              >'ArrowDown'</span
            >]) player.y += player.speed;

            <span class="code-comment">// Render</span>
            ctx.clearRect(<span class="code-number">0</span>,
            <span class="code-number">0</span>, canvas.width, canvas.height);
            ctx.fillStyle = player.color; ctx.fillRect(player.x, player.y,
            player.width, player.height);

            <span class="code-comment">// Continue the loop</span>
            requestAnimationFrame(gameLoop); }

            <span class="code-comment">// Start the game</span>
            gameLoop();
          </div>
        </div>
      </div>

      <div class="chat-container" id="chatContainer">
        <div class="chat-header">
          <div class="assistant-avatar">AI</div>
          <div class="assistant-info">
            <h3>Game Dev Assistant</h3>
            <p>Ask me anything about game development</p>
          </div>
        </div>

        <div class="chat-messages" id="chatMessages">
          <div class="message system">
            Chat started. The Game Dev Assistant is ready to help you with game
            development, game engines, and using our Background Designer tool.
          </div>
          <div class="message assistant">
            👋 Hello! I'm your Game Development Assistant. How can I help you
            today? Whether you need guidance on game engines, programming
            concepts, or how to use our Background Designer tool, I'm here to
            assist!
          </div>
        </div>

        <div class="chat-input">
          <input
            type="text"
            id="userInput"
            placeholder="Ask about game development..."
            onkeypress="handleKeyPress(event)"
          />
          <button onclick="sendMessage()" id="sendButton">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="currentColor"
              viewBox="0 0 16 16"
            >
              <path
                d="M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z"
              />
            </svg>
          </button>
        </div>
      </div>
    </div>

    <button class="toggle-chat" id="toggleChat">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        fill="currentColor"
        viewBox="0 0 16 16"
      >
        <path
          d="M5 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"
        />
        <path
          d="m2.165 15.803.02-.004c1.83-.363 2.948-.842 3.468-1.105A9.06 9.06 0 0 0 8 15c4.418 0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6a10.437 10.437 0 0 1-.524 2.318l-.003.011a10.722 10.722 0 0 1-.244.637c-.079.186.074.394.273.362a21.673 21.673 0 0 0 .693-.125zm.8-3.108a1 1 0 0 0-.287-.801C1.618 10.83 1 9.468 1 8c0-3.192 3.004-6 7-6s7 2.808 7 6c0 3.193-3.004 6-7 6a8.06 8.06 0 0 1-2.088-.272 1 1 0 0 0-.711.074c-.387.196-1.24.57-2.634.893a10.97 10.97 0 0 0 .398-2z"
        />
      </svg>
    </button>

    <script>
      // Knowledge base for the AI assistant
      const knowledgeBase = {
        // Game development basics
        "game development":
          "Game development is the process of creating video games. It involves concept design, programming, art creation, sound design, testing, and deployment.",
        "game engine":
          "A game engine is a software framework designed for the creation and development of video games. Popular engines include Unity, Unreal Engine, Godot, and GameMaker Studio.",

        // Specific engines
        unity:
          "Unity is a cross-platform game engine developed by Unity Technologies. It uses C# for scripting and is popular for both 2D and 3D game development. It has a large asset store and community.",
        "unreal engine":
          "Unreal Engine is a game engine developed by Epic Games. It's known for high-quality graphics and uses C++ or Blueprint visual scripting. It's free until your game makes significant revenue.",
        godot:
          "Godot is a free and open-source game engine. It uses its own scripting language called GDScript (similar to Python) and has a node-based architecture. It's great for both 2D and 3D games.",
        gamemaker:
          "GameMaker Studio is designed primarily for 2D games with a simpler learning curve. It uses GameMaker Language (GML) and is great for beginners but requires a license purchase.",

        // Background Designer tool
        "background designer":
          "Our Background Designer is a tool that allows you to create professional game backgrounds. It features layers, gradient backgrounds, particle effects, text and shapes, filters, animations, and preset templates.",
        layers:
          "The Background Designer supports multiple layers for organizing your scene elements. You can adjust layer opacity, add new layers, and determine which elements appear in front of others.",
        "gradient backgrounds":
          "You can create gradient backgrounds by choosing start and end colors along with a direction (horizontal, vertical, diagonal, or radial).",
        "particle effects":
          "The Background Designer supports particle effects including sparkles, snow, rain, bubbles, and fire. You can customize particle color and intensity.",
        animation:
          "You can animate elements in the Background Designer using effects like float, pulse, rotate, and shake. You can control animation duration and intensity.",

        // Programming concepts
        "programming languages":
          "Different game engines use different programming languages. Unity uses C#, Unreal Engine uses C++ or Blueprints, Godot uses GDScript, and GameMaker uses GML.",
        sprites:
          "Sprites are 2D bitmap graphics that represent characters, items, or environment elements in games. In our Background Designer, you can add sprite elements to your scenes.",
        "game loop":
          "The game loop is the central component of any game. It continuously processes user input, updates the game state, and renders the screen. This happens many times per second to create smooth gameplay.",

        // Game types
        "2d game":
          "2D games are played in a two-dimensional space. They often use sprites for graphics and are simpler to develop than 3D games. Examples include platformers (like Mario), puzzle games, and side-scrollers.",
        "3d game":
          "3D games create a three-dimensional virtual space. They require more complex mathematics, models, and rendering techniques. Examples include first-person shooters, open-world games, and simulations.",

        // Resources
        "learning resources":
          "To learn game development, you can use online platforms like Unity Learn, Unreal Documentation, YouTube tutorials, Udemy courses, or game development-focused sites like Gamasutra and Game Developer.",
      };

      // Background Designer instructions
      const backgroundDesignerInstructions = {
        gradient:
          'To create a gradient background in the Designer:\n1. Go to the Background section\n2. Choose your gradient start and end colors\n3. Select a gradient direction\n4. Click "Apply Gradient"',
        particles:
          'To add particle effects in the Designer:\n1. Go to the Particle Effects section\n2. Choose an effect type (sparkles, snow, rain, etc.)\n3. Set the particle color and intensity\n4. Click "Add Effect"',
        text: 'To add text in the Designer:\n1. Go to the Text section\n2. Enter your text content\n3. Adjust the font size, color, and family\n4. Enable glow effect if desired\n5. Click "Add Text"\nYou can then drag the text to position it',
        animation:
          'To animate objects in the Designer:\n1. Add the object you want to animate\n2. Go to the Animation section\n3. Choose an animation type (float, pulse, rotate, shake)\n4. Set the duration and intensity\n5. Click "Animate Last Object"',
        filters:
          'To apply visual filters in the Designer:\n1. Go to the Filters & Effects section\n2. Adjust the settings for blur, brightness, contrast, etc.\n3. Click "Apply to Layer"\nThis affects the currently selected layer',
      };

      // Toggle chat function
      document
        .getElementById("toggleChat")
        .addEventListener("click", function () {
          const chatContainer = document.getElementById("chatContainer");
          chatContainer.classList.toggle("active");
        });

      // Topic toggle function
      function toggleTopic(element) {
        const content = element.querySelector(".topic-content");
        const indicator = element.querySelector(".topic-header h2 span");

        content.classList.toggle("active");
        indicator.textContent = content.classList.contains("active")
          ? "-"
          : "+";
      }

      // Navigation functions (continued)
      document
        .getElementById("tutorialsButton")
        .addEventListener("click", function () {
          // This would redirect to a tutorials page
          alert("Tutorials page would load here");
          setActiveButton(this);
        });

      document
        .getElementById("resourcesButton")
        .addEventListener("click", function () {
          // This would redirect to a resources page
          alert("Resources page would load here");
          setActiveButton(this);
        });

      function setActiveButton(button) {
        // Remove active class from all buttons
        document.querySelectorAll(".nav-button").forEach((btn) => {
          btn.classList.remove("active");
        });
        // Add active class to clicked button
        button.classList.add("active");
      }

      function redirectToDesigner() {
        // This would redirect to the background designer
        window.location.href = "background-designer.html"; // Change as needed
      }

      // Chat functionality
      let isWaitingForResponse = false;

      function sendMessage() {
        if (isWaitingForResponse) return;

        const userInput = document.getElementById("userInput");
        const message = userInput.value.trim();

        if (message === "") return;

        // Add user message to chat
        addMessageToChat("user", message);

        // Clear input
        userInput.value = "";

        // Show loading indicator
        isWaitingForResponse = true;
        addMessageToChat(
          "assistant",
          '<span class="loading-dots"></span>',
          "loading-message"
        );

        // Process the message and get response (with a slight delay to simulate processing)
        setTimeout(() => {
          const botResponse = getBotResponse(message);

          // Remove loading message
          document.getElementById("loading-message").remove();

          // Add assistant response
          addMessageToChat("assistant", botResponse);

          isWaitingForResponse = false;
        }, 1000);
      }

      function handleKeyPress(event) {
        if (event.key === "Enter") {
          sendMessage();
        }
      }

      function addMessageToChat(sender, content, id = null) {
        const chatMessages = document.getElementById("chatMessages");
        const messageDiv = document.createElement("div");
        messageDiv.className = `message ${sender}`;
        if (id) messageDiv.id = id;
        messageDiv.innerHTML = content;
        chatMessages.appendChild(messageDiv);

        // Scroll to bottom
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      function askQuestion(question) {
        document.getElementById("userInput").value = question;

        // Toggle chat to visible if on mobile
        const chatContainer = document.getElementById("chatContainer");
        if (!chatContainer.classList.contains("active")) {
          chatContainer.classList.add("active");
        }

        // Send the message
        sendMessage();
      }

      function getBotResponse(message) {
        // Convert message to lowercase for matching
        const lowerMessage = message.toLowerCase();

        // Check for specific questions about the Background Designer tool
        if (
          lowerMessage.includes("background designer") &&
          lowerMessage.includes("how")
        ) {
          return `Our Background Designer is a powerful tool for creating game backgrounds. You can access it by clicking the "Background Designer" button in the navigation bar.<br><br>
                Here are some key features:<br>
                • Create gradient backgrounds<br>
                • Add particle effects (snow, rain, fire, etc.)<br>
                • Insert and manipulate shapes<br>
                • Add text with custom styling<br>
                • Use multiple layers<br>
                • Apply visual filters<br>
                • Animate elements<br><br>
                What specific aspect would you like to know more about?`;
        }

        if (lowerMessage.includes("particle") && lowerMessage.includes("how")) {
          return backgroundDesignerInstructions["particles"];
        }

        if (lowerMessage.includes("gradient") && lowerMessage.includes("how")) {
          return backgroundDesignerInstructions["gradient"];
        }

        if (lowerMessage.includes("text") && lowerMessage.includes("how")) {
          return backgroundDesignerInstructions["text"];
        }

        if (
          lowerMessage.includes("animation") ||
          lowerMessage.includes("animate")
        ) {
          return backgroundDesignerInstructions["animation"];
        }

        if (lowerMessage.includes("filter") && lowerMessage.includes("how")) {
          return backgroundDesignerInstructions["filters"];
        }

        // Check for engine comparisons
        if (
          lowerMessage.includes("unity") &&
          lowerMessage.includes("unreal") &&
          (lowerMessage.includes("compare") ||
            lowerMessage.includes("difference") ||
            lowerMessage.includes("versus") ||
            lowerMessage.includes("vs"))
        ) {
          return `<strong>Unity vs. Unreal Engine:</strong><br><br>
                <strong>Unity:</strong><br>
                • Uses C# programming language<br>
                • Better for mobile and small to mid-sized games<br>
                • Easier learning curve<br>
                • Large asset store<br>
                • Subscription-based pricing model<br><br>
                
                <strong>Unreal Engine:</strong><br>
                • Uses C++ or visual Blueprint scripting<br>
                • Superior graphics capabilities<br>
                • Better for large, high-fidelity games<br>
                • Royalty-based pricing (free until $1M revenue)<br>
                • Stronger built-in systems for open-world games<br><br>
                
                For beginners, Unity is often recommended due to its easier learning curve and C# being more beginner-friendly than C++.`;
        }

        // Check for game type questions
        if (
          lowerMessage.includes("how") &&
          lowerMessage.includes("make") &&
          lowerMessage.includes("2d game")
        ) {
          return `<strong>Creating a 2D Game:</strong><br><br>
                1. <strong>Choose an engine</strong> - For 2D games, Unity, Godot, or GameMaker are excellent choices.<br><br>
                
                2. <strong>Plan your game</strong> - Start with a simple concept like a platformer or puzzle game.<br><br>
                
                3. <strong>Create art assets</strong>:<br>
                • Design character sprites<br>
                • Create background images using our Background Designer<br>
                • Make UI elements<br><br>
                
                4. <strong>Program game mechanics</strong>:<br>
                • Player movement<br>
                • Collision detection<br>
                • Game rules<br><br>
                
                5. <strong>Add audio</strong> for sound effects and music<br><br>
                
                6. <strong>Test and refine</strong> your game repeatedly<br><br>
                
                Would you like more specific information about any of these steps?`;
        }

        // Check for engine recommendations
        if (
          lowerMessage.includes("recommend") &&
          lowerMessage.includes("engine") &&
          lowerMessage.includes("beginner")
        ) {
          return `<strong>Game Engines for Beginners:</strong><br><br>
                1. <strong>Unity</strong> - Excellent all-around choice with C# programming, huge community support, and extensive tutorials.<br><br>
                
                2. <strong>Godot</strong> - Free, open-source engine with a Python-like language (GDScript) that's easy to learn. Great for 2D games.<br><br>
                
                3. <strong>GameMaker Studio</strong> - Specifically designed for beginners making 2D games. Simplified programming with GML.<br><br>
                
                4. <strong>Construct 3</strong> - Visual programming with no coding required. Web-based and perfect for complete beginners.<br><br>
                
                For absolute beginners with no programming experience, I'd recommend starting with Construct 3 or GameMaker. If you're willing to learn some coding, Godot is an excellent free option.`;
        }

        // Check for sprite questions
        if (lowerMessage.includes("what") && lowerMessage.includes("sprite")) {
          return `<strong>What are Sprites in Game Development?</strong><br><br>
                Sprites are 2D bitmap images that represent characters, objects, or elements in a game. They're essentially the visual building blocks of 2D games.<br><br>
                
                Key aspects of sprites:<br>
                • They can be static images or animated sequences<br>
                • Sprite sheets contain multiple sprite frames for animations<br>
                • They often have transparent backgrounds to blend with game scenes<br>
                • Sprites can be manipulated (rotated, scaled, colored)<br><br>
                
                In our Background Designer tool, you can import and position sprites as elements in your game backgrounds. This helps you create cohesive scenes that match your game's visual style.`;
        }

        // Check for programming language questions
        if (
          lowerMessage.includes("programming language") &&
          (lowerMessage.includes("which") || lowerMessage.includes("what"))
        ) {
          return `<strong>Programming Languages for Game Development:</strong><br><br>
                The best language depends on your chosen engine:<br><br>
                
                • <strong>C#</strong> - Used in Unity. Relatively easy to learn and very versatile.<br><br>
                
                • <strong>C++</strong> - Used in Unreal Engine. More complex but powerful and efficient.<br><br>
                
                • <strong>GDScript</strong> - Used in Godot. Similar to Python and designed specifically for game development.<br><br>
                
                • <strong>JavaScript</strong> - Used in web-based game development and some HTML5 game engines.<br><br>
                
                For beginners, C# (Unity) or GDScript (Godot) are generally easier to learn than C++. If you're brand new to programming, consider starting with a visual scripting tool first.`;
        }

        // Generic response based on keyword matching from knowledge base
        for (const keyword in knowledgeBase) {
          if (lowerMessage.includes(keyword)) {
            return knowledgeBase[keyword];
          }
        }

        // Default response if no matches
        return `Thanks for your question about "${message}". While I'm designed to help with game development topics, I'm still learning.<br><br>
            Could you try rephrasing your question? You can ask about:<br>
            • Game engines (Unity, Unreal, Godot, etc.)<br>
            • Game development concepts<br>
            • How to use our Background Designer<br>
            • Programming languages for games<br>
            • Getting started with game development`;
      }

      // Resource recommendations
      function getResourceRecommendations(topic) {
        const resources = {
          unity: [
            {
              name: "Unity Learn",
              url: "https://learn.unity.com/",
              description: "Official Unity tutorials and courses",
            },
            {
              name: "Brackeys YouTube",
              url: "https://www.youtube.com/c/Brackeys",
              description: "Excellent Unity tutorials for beginners",
            },
          ],
          unreal: [
            {
              name: "Unreal Documentation",
              url: "https://docs.unrealengine.com/",
              description: "Official Unreal Engine documentation",
            },
            {
              name: "Unreal Sensei",
              url: "https://www.youtube.com/c/UnrealSensei",
              description: "Comprehensive Unreal Engine tutorials",
            },
          ],
          godot: [
            {
              name: "Godot Docs",
              url: "https://docs.godotengine.org/",
              description: "Official Godot documentation",
            },
            {
              name: "GDQuest",
              url: "https://www.youtube.com/c/Gdquest",
              description: "Godot tutorials and courses",
            },
          ],
          art: [
            {
              name: "OpenGameArt",
              url: "https://opengameart.org/",
              description: "Free game art resources",
            },
            {
              name: "Kenney",
              url: "https://kenney.nl/",
              description: "Free game assets and sprites",
            },
          ],
          sound: [
            {
              name: "Freesound",
              url: "https://freesound.org/",
              description: "Free sound effects",
            },
            {
              name: "Incompetech",
              url: "https://incompetech.com/",
              description: "Royalty-free music",
            },
          ],
        };

        return resources[topic] || [];
      }

      // Initialize modules when page loads
      window.addEventListener("load", function () {
        // Setup chatbot scrolling behavior
        const chatMessages = document.getElementById("chatMessages");
        chatMessages.scrollTop = chatMessages.scrollHeight;

        // Expand first topic by default
        const firstTopic = document.querySelector(".topic-container");
        toggleTopic(firstTopic);

        // Add sample code editor tabs behavior
        const tabs = document.querySelectorAll(".code-editor-header .tab");
        tabs.forEach((tab) => {
          tab.addEventListener("click", function () {
            tabs.forEach((t) => t.classList.remove("active"));
            this.classList.add("active");
          });
        });

        // Add tutorial section
        const tutorialSection = `
        <div class="tutorial-section" style="display: none;">
            <h2>Game Development Tutorials</h2>
            <div class="tutorial-cards">
                <!-- Tutorial cards would go here -->
            </div>
        </div>
    `;
        document
          .querySelector(".content-area")
          .insertAdjacentHTML("beforeend", tutorialSection);
      });
    </script>
  </body>
</html>
